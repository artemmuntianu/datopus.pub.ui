<div class="alert alert-bg-d text-md d-flex justify-content-between align-items-center" *ngIf="isAlertVisible.reportExplanation">
    Insights help identify abnormal spikes and dips in usage patterns, potentially signaling underlying problems like technical glitches or changes in user behavior.
    By detecting issues early, you can take proactive steps to mitigate their impact, reducing downtime and improving user experience.
    <button type="button" class="close bg-transparent text-white p-0 border-none" (click)="isAlertVisible.reportExplanation = false">
        <i class="ri-close-line"></i>
    </button>
</div>

<mat-drawer-container hasBackdrop="true">
    <mat-drawer-content data-ds-feature="Report.Insights.Main">
        <mat-card class="daxa-card mb-25 pb-0 border-radius bg-white d-block">
            <mat-card-content>
                <div class="row">
                    <div *ngFor="let x of insights"
                         class="col-lg-3">
                        <app-reports-features-insights-card [insight]="x" (viewMonitorSettingsClick)="onViewMonitorSettingsClick($event)"></app-reports-features-insights-card>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </mat-drawer-content>
    <mat-drawer data-ds-feature="Report.Insights.Filters" #drawer mode="over" position="end">
        <ng-scrollbar>
            <span class="lh-30">Monitor Settings</span>
            <button mat-fab class="daxa"
                    style="margin-bottom: 10px; box-shadow: none; height: 30px; width: 30px; float: right"
                    (click)="onCloseMonitorSettingsClick()"
                    [style.display]="drawer.opened ? 'inline-flex' : 'none'">
                <mat-icon>close</mat-icon>
            </button>
            <div *ngIf="selectedInsight" class="clear-both">
                <mat-divider class="mb-10"></mat-divider>
                <ul class="info-list pr-0 pl-0 mb-0 mt-0 list-unstyled">
                    <li>
                        <span class="text-body">Name:</span>&nbsp;{{selectedInsight.monitor.name}}
                    </li>
                    <li>
                        <span class="text-body">Metric:</span>&nbsp;{{selectedInsight.monitor.metric | titlecase}}
                    </li>
                    <li>
                        <span class="text-body">Threshold:</span>&nbsp;
                        {{ selectedInsight.monitor.thresholdVal < 0 ? 'Decreased by ' : 'Increased by ' }}
                        {{ selectedInsight.monitor.thresholdIsPercent ? (abs(selectedInsight.monitor.thresholdVal)|percent:'1.0-2') : (abs(selectedInsight.monitor.thresholdVal)|number) }}
                    </li>
                    <li>
                        <span class="text-body">Comparison:</span>&nbsp;{{selectedInsight.monitor.comparison}}
                    </li>
                </ul>
                <div class="mat-mdc-subheader mb-10 mt-10">Filter</div>
                <ul class="info-list pr-0 pl-0 mb-0 mt-0 list-unstyled">
                    <li *ngFor="let x of selectedInsight.monitor.filter">
                        <span class="text-body">{{getMonitorFilterName(x)}}:</span>&nbsp;{{x.value ?? 'EVERY'}}
                    </li>
                </ul>
            </div>
        </ng-scrollbar>
    </mat-drawer>
</mat-drawer-container>